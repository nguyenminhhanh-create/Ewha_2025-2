# Implementation Plan - Streamlit YouTube Trends Analysis

## Goal Description
Create a single-file Streamlit application (`app.py`) that performs regression analysis on Korean YouTube trending video data (views, likes, comments) and predicts trends for the first 6 months of 2026. The app will include an OpenAI-powered chat interface with streaming responses to interpret the results.

## User Review Required
> [!IMPORTANT]
> **Data Availability**: The application assumes `daily_trending_videos.csv` is present in the directory. I will create a script `create_mock_data.py` to generate sample data for development and verification since the actual large dataset is not currently in the environment.

> [!WARNING]
> **OpenAI API Key**: The user must provide their own OpenAI API key via the app sidebar for the chat functionality to work.

## Proposed Changes

### Root Directory

#### [NEW] [create_mock_data.py](file:///c:/SocialMediaAnalysis/create_mock_data.py)
- Script to generate a synthetic `daily_trending_videos.csv` with columns: `trending_date`, `view_count`, `likes`, `comment_count`, `country` (set to 'KR' for some rows), etc.
- This ensures the app can be run and tested immediately.

#### [NEW] [app.py](file:///c:/SocialMediaAnalysis/app.py)
- **Imports**: `streamlit`, `pandas`, `sklearn`, `openai`, `plotly/matplotlib`.
- **Data Loading**: Function to load `daily_trending_videos.csv`.
- **Preprocessing**: 
    - Convert `trending_date` to datetime.
    - Filter for `country == 'KR'` (if column exists) or assume data is correct.
    - Aggregate data by date (daily total/average views, likes, comments) for regression.
- **Analysis**:
    - Train regression models (e.g., LinearRegression) on historical data.
    - Predict for Jan 2026 - June 2026.
- **Visualization**:
    - Line charts showing historical data and future predictions.
- **Chat Interface**:
    - Sidebar input for OpenAI API Key.
    - Chat window to ask questions about the data.
    - System prompt for the AI to interpret the regression results.
    - Streaming response implementation.

## Verification Plan

### Automated Tests
- Run `python create_mock_data.py` to generate data.
- Run `python -m pytest tests/` (if we add unit tests, but unlikely for a simple script). 
- We will verify by running the app.

### Manual Verification
1.  **Generate Data**: Run `python create_mock_data.py`.
2.  **Run App**: `streamlit run app.py`.
3.  **Check UI**:
    - Verify charts appear.
    - Verify "Korea" data is processed.
    - Verify predictions for 2026 are shown.
4.  **Check Chat**:
    - Enter a dummy API Key (requests will fail but UI logic can be tested) or a real one if possible (I cannot use a real one).
    - I will assume the code is correct if the streaming logic is standard.
